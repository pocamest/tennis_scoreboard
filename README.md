# Tennis Scoreboard (Теннисное табло)

Реализация веб-приложения "Теннисное табло" с фокусом на архитектурные паттерны.

**Цель проекта:** Практика в проектировании слоистой архитектуры (MVCS) и ручной реализации веб-серверной части (WSGI) без использования крупных веб-фреймворков.

---

## Запуск

1.  **Настройка `.env` файла:**
    -   `cp .env.example .env`
    -   Заполнить `DB_URL` и `DB_ECHO` в `.env`.

2.  **Установка зависимостей:**
    -   Для разработки (включая dev-зависимости): `uv sync`
    -   Для продакшена: `uv sync --no-dev`
    *Эта команда автоматически создаст `.venv` и установит зависимости.*

3.  **Миграции БД:**
    -   `uv run alembic upgrade head`

4.  **Старт сервера:**
    -   `uv run python main.py`
    -   Сервер будет доступен по адресу, указанному в `main.py` (по умолч. `localhost:8080`).

---

## Архитектурные Решения

Зафиксированные принципы для поддержания консистентности кода.

#### 1. Структура Пакетов (`app/`)
Проект разделен на слои, каждый из которых реализован как отдельный пакет для ясного разграничения ответственности:
-   `controllers/`: Обработка HTTP-запросов.
-   `services/`: Оркестрация бизнес-операций.
-   `repositories/`: Инкапсуляция логики доступа к данным.
-   `models/`: Доменный слой (Rich Domain Model).
-   `schemas/`: Валидация данных (Pydantic).

#### 2. Проектирование Моделей
Ключевые принципы проектирования доменных моделей задокументированы в `docstring` файла `app/models/__init__.py`. Основная идея — `relationship` используется только для фундаментальных структурных связей.

#### 3. Именование Методов в Слоях

-   **Repository (`app/repositories/`):** Имена технические, описывают *КАК* получаются данные.
    -   `get_*(...)`: Строгий поиск одного объекта по уникальному ключу. Возвращает объект или бросает исключение `NotFoundError`.
    -   `find_one_*(...)`: Безопасный поиск одного объекта. Возвращает `Объект | None`.
    -   `find_all_*(...)`: Поиск множества. Возвращает `list[Объект]`.
    -   Суффикс `_with_<relation>` используется для обозначения жадной загрузки.

-   **Service (`app/services/`):** Имена описывают бизнес-операцию (*ЧТО* мы делаем), например, `get_all_matches()`.

-   **Controller (`app/controllers/`):** Имена описывают действие пользователя или страницу (*ЗАЧЕМ*), например, `show_index_page()`.